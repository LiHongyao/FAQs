### 001：跨域问题

由于浏览器 **同源策略** 的限制，非同源的请求会被限制。

1. jsonp
2. 配置nginx反向代理
3. 设置CORS（跨域资源共享）
4. WebSocket

### 002：浏览器存储

1. Cookies
2. WebStorage（localStorage/sessionStorage）
3. indexDB
4. Cache Storage

### 003：浏览器渲染页面的过程？

相似问题：

1. 在浏览器里，从输入 URL 到页面展示，这中间发生了什么？
2. 浏览器导航流程？

答题模板：

1. 用户输入：浏览器首先判断输入的内容是URL还是关键字，如果是关键字，则使用默认配置的搜索引擎来查询，如果是请求的URL，则会进入URL解析流程。
2. URL解析（域名、端口号、路径、查询参数、锚点等）
3. DNS解析：在解析域名的过程中，浏览器需要将域名解析为服务器的 IP 地址。浏览器首先检查本地 DNS 缓存，如果找到了对应的 IP 地址，则跳过后续步骤。否则，浏览器向本地 DNS 服务器发送 DNS 请求，该服务器会向上级 DNS 服务器递归查询，直到找到域名对应的 IP 地址。一旦找到 IP 地址，浏览器会将其缓存起来供以后使用。
4. 建立TCP连接：三次握手
5. 浏览器发送请求：浏览器向服务器发送 HTTP 请求。请求包括请求行（请求方法、URL 和 HTTP 版本）、请求头（Accept、User-Agent 等）和请求体（POST 请求的参数）。
6. 服务器处理请求：服务器接收到请求后，根据请求的 URL 和参数，执行相应的处理逻辑。这可能涉及查询数据库、处理业务逻辑、生成动态内容等。
7. 服务器响应请求：服务器生成 HTTP 响应，包括响应行（状态码、HTTP 版本）、响应头（Content-Type、Content-Length 等）和响应体（HTML、CSS、JavaScript 等）。
8. 浏览器接收响应：览器接收到服务器的响应，开始按序接收响应的数据包。这些数据包通过 TCP 连接传输，并通过网络层和传输层协议进行分段、传输和重组。
9. 解析HTML：浏览器接收到响应后，会根据响应头中的 Content-Type 字段确定响应的数据类型，通常为 HTML。浏览器开始解析 HTML，并构建 DOM树。
10. 加载资源：在解析 HTML 过程中，如果遇到外部资源（如 CSS 文件、JavaScript 文件、图像等），浏览器会发起额外的网络请求，获取这些资源。
11. 解析 CSS 和 JavaScript：浏览器解析 HTML 时，会遇到嵌入的 CSS 样式和 JavaScript 脚本。浏览器会解析 CSS 样式规则，计算元素的样式，并将其应用到对应的 DOM 元素上。JavaScript 脚本会被解析和执行，可以修改页面的结构和行为。
12. 构建渲染树：浏览器根据解析得到的 DOM 树和样式规则，构建渲染树（Render Tree）。渲染树包含了所有需要显示的 DOM 元素及其样式信息。
13. 布局：渲染树构建完成后，浏览器进行布局过程，计算出每个元素在屏幕上的位置和大小。布局过程也称为回流或排版。
14. 绘制：布局完成后，浏览器将渲染树中的元素转换为屏幕上的实际像素，这个过程称为绘制。绘制使用图形库将元素转换为位图，并进行组合和渲染。
15. 显示页面：绘制完成后，浏览器将位图发送给显示设备，显示设备将位图渲染为可见的页面。页面的内容显示在浏览器窗口中，用户可以看到并与页面进行交互。

### 004：简述一下浏览器渲染机制？⭐️

1. 解析HTML，生成DOM树。
2. 解析CSS，生成CSSOM树。
3. 将DOM树和CSSOM树结合，生成渲染树（*也称为合成树或布局树*）。
4. 布局（回流）：根据渲染树的信息，确定元素的位置和大小。
5. 绘制（重绘）：进行绘制
6. 合成绘制，呈现页面图像。

### 005：重排（回流）⭐️

当 DOM 的变化影响了元素的**几何信息**（*位置和尺寸大小*），浏览器需要重新计算元素的几何属性，将其安放在界面中的正确位置，这个过程叫做重排。 

触发：添加或者删除可见的 DOM 元素、元素尺寸改变——边距、填充、边框、宽度和高度

### 006：重绘 ⭐️

当一个元素的 **外观发生改变**，但没有改变布局，重新把元素外观绘制出来的过程，叫做重绘。 

触发：改变元素的 color、background、box-shadow 等属性

### 007：重排重绘优化建议 ⭐️

1. 减少重排和重绘：通过批量修改样式或使用CSS类名，避免频繁修改样式属性。
2. 使用CSS3动画：利用CSS3动画的GPU加速，代替JavaScript动画，提升性能。
3. 使用transform属性进行动画：使用CSS的transform属性实现动画变换，避免重排，提高性能。
4. 缓存布局信息：避免频繁获取元素的布局信息，缓存或保存后续使用。
5. 使用文档片段：将多个DOM操作放入文档片段中一次性插入到DOM树，减少重排和重绘次数。
6. 合理使用CSS布局：选择合适的布局方式，如flexbox或grid布局，提高性能。
7. 避免使用表格布局：表格布局复杂时性能较差，尽量使用其他布局方式。
8. 使用事件委托：通过事件委托减少事件监听器的数量，提升性能。
9. 避免过多的阴影和渐变效果：减少计算和绘制操作，优化性能。
10. 使用CSS Sprite或图标字体：合并图标成一张大图或使用图标字体，减少HTTP请求，提高性能。
